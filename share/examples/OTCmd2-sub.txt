# Subscribe to messages from RabbitMQ on a given topic:
# These tests will only work if you have an OTMql4AMQP enabled Metatrader running,
# the Experts/OTMql4/OTPyTestPikaEA.mq4 attached to a chart in it, and
# the RabbitMQ server configured and running.
set echo True
# set the on-line target to be the default from OTCmd2.ini
sub set
# set the on-line target to be the only one that works right now :-)
sub set RabbitMQ
# We need a listener thread running, subscribed to retval.#
sub run retval.# timer.#
py import time
py time.sleep(15)
# list the message topics that are being hidden
sub show
py import time
# you should see some timer messages in JSON format
py time.sleep(15)
# stop seeing TOPIC messages (e.g. tick - not a pattern)
sub hide timer
# now you should see no timer messages
py time.sleep(15)
# start seeing timer messages again
sub show timer
py time.sleep(15)
# pprint ?0|1       - seeing TOPIC messages with pretty-printing,
# with 0 - off, 1 - on, no argument - current value
sub pprint
sub pprint 0
sub pprint 1
# info on the thread listening for messages.
sub thread info
# enumerate all threads
sub thread enumerate
quit
